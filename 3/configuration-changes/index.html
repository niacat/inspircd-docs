<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="InspIRCd is a modular C++ Internet Relay Chat (IRC) server for UNIX-like and Windows systems.">
    
    
    <link rel="../../img/favicon.ico">

    
    <title>v3 Configuration Changes - InspIRCd Documentation</title>
    

    <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../../css/base.min.css" rel="stylesheet">
    <link href="../../css/cinder.min.css" rel="stylesheet">
    <link href="../../css/highlight.min.css" rel="stylesheet">
    <link href="../../css/fix-cinder-sidebar-scrolling.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->

    <script src="//ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    

     
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            <a class="navbar-brand" href="../..">InspIRCd Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">InspIRCd 2 <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="/2/installation">Installation</a>
</li>

                        
                            
<li >
    <a href="/2/configuration">Configuration</a>
</li>

                        
                            
<li >
    <a href="/2/commands">Commands</a>
</li>

                        
                            
<li >
    <a href="/2/modes">Modes</a>
</li>

                        
                            
<li >
    <a href="/2/modules">Modules</a>
</li>

                        
                            
<li >
    <a href="/2/snomasks">SNOMasks</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">InspIRCd 3 <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="/3/installation">Installation</a>
</li>

                        
                            
<li >
    <a href="/3/configuration">Configuration</a>
</li>

                        
                            
<li >
    <a href="/3/commands">Commands</a>
</li>

                        
                            
<li >
    <a href="/3/modes">Modes</a>
</li>

                        
                            
<li >
    <a href="/3/modules">Modules</a>
</li>

                        
                            
<li >
    <a href="/3/snomasks">SNOMasks</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="https://github.com/inspircd/inspircd/releases/latest">Downloads</a>
                    </li>
                
                
                
                    <li >
                        <a href="https://github.com/inspircd/inspircd/issues">Issue Tracker</a>
                    </li>
                
                
                
                    <li >
                        <a href="https://www.inspircd.org/api/">Developer API</a>
                    </li>
                
                
                </ul>

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fas fa-search"></i> Search
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/inspircd/inspircd-docs/edit/master/docs/3/configuration-changes.md"><i class="fab fa-github"></i> Edit on GitHub</a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#configuration-changes-since-inspircd-2">Configuration changes since InspIRCd 2</a></li>
        <li class="first-level "><a href="#changes">Changes</a></li>
        <li class="first-level "><a href="#moves">Moves</a></li>
        <li class="first-level "><a href="#removals">Removals</a></li>
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h2 id="configuration-changes-since-inspircd-2">Configuration changes since InspIRCd 2</h2>
<p>NOTE: This document only lists breaking changes between InspIRCd 2 and InspIRCd 3. There are many backwards compatible changes that have been made which are not listed in this document.</p>
<h2 id="changes">Changes</h2>
<ul>
<li>
<p>The ldapauth module no longer needs to be enabled at build time but now depends on the new ldap module which does need to be enabled at build time.</p>
</li>
<li>
<p>The ldapoper module no longer needs to be enabled at build time but now depends on the new ldap module which does need to be enabled at build time.</p>
</li>
<li>
<p>The default for <code>&lt;config:format&gt;</code> has changed from <code>compat</code> to <code>xml</code>. If you have not set this value then you will need to set it to <code>compat</code> or switch all C-style <code>\</code> escapes to XML-style <code>&amp;entity;</code> escapes.</p>
</li>
<li>
<p>The <code>users/samode-usermodes</code> oper privilege is now required in order to change the user modes of other users with <code>/SAMODE</code>.</p>
</li>
<li>
<p><code>&lt;cloak:key&gt;</code> must now be at least 30 characters long. If your cloaking key is shorter than this you should define a stronger one in your <code>&lt;cloak&gt;</code> tag. You can define a second <code>&lt;cloak&gt;</code> tag with your old key to be used as a backup to avoid breaking any existing bans.</p>
</li>
<li>
<p><code>&lt;disabled&gt;</code> has been moved from the core to the new disable module. All you will need to do in order to upgrade is to load this module.</p>
</li>
<li>
<p><code>&lt;gnutls:cafile&gt;</code> is now relative to the config directory. Generally all you will need to do in order to upgrade is remove <code>conf/</code> from the path.</p>
</li>
<li>
<p><code>&lt;gnutls:certfile&gt;</code> is now relative to the config directory. Generally all you will need to do in order to upgrade is remove <code>conf/</code> from the path.</p>
</li>
<li>
<p><code>&lt;gnutls:crlfile&gt;</code> is now relative to the config directory. Generally all you will need to do in order to upgrade is remove <code>conf/</code> from the path.</p>
</li>
<li>
<p><code>&lt;gnutls:keyfile&gt;</code> is now relative to the config directory. Generally all you will need to do in order to upgrade is remove <code>conf/</code> from the path.</p>
</li>
<li>
<p><code>&lt;include:file&gt;</code> is now relative to the config directory. Generally all you will need to do in order to upgrade is remove <code>conf/</code> from the path.</p>
</li>
<li>
<p><code>&lt;log:target&gt;</code> is now relative to the log directory. Generally all you will need to do in order to upgrade is remove <code>logs/</code> from the path.</p>
</li>
<li>
<p><code>&lt;openssl:cafile&gt;</code> is now relative to the config directory. Generally all you will need to do in order to upgrade is remove <code>conf/</code> from the path.</p>
</li>
<li>
<p><code>&lt;openssl:certfile&gt;</code> is now relative to the config directory. Generally all you will need to do in order to upgrade is remove <code>conf/</code> from the path.</p>
</li>
<li>
<p><code>&lt;openssl:crlfile&gt;</code> is now relative to the config directory. Generally all you will need to do in order to upgrade is remove <code>conf/</code> from the path.</p>
</li>
<li>
<p><code>&lt;openssl:dhfile&gt;</code> is now relative to the config directory. Generally all you will need to do in order to upgrade is remove <code>conf/</code> from the path.</p>
</li>
<li>
<p><code>&lt;openssl:keyfile&gt;</code> is now relative to the config directory. Generally all you will need to do in order to upgrade is remove <code>conf/</code> from the path.</p>
</li>
<li>
<p><code>&lt;options:defaultmodes&gt;</code> must now include any default prefix modes. To keep v2 behaviour add "o" to the default modes.</p>
</li>
<li>
<p><code>&lt;permchanneldb:filename&gt;</code> is now relative to the config directory. Generally all you will need to do in order to upgrade is move <code>permchannels.conf</code> to <code>conf/</code> and remove <code>data/</code> from the path.</p>
</li>
<li>
<p><code>&lt;sasl:target&gt;</code> is now required. The module cannot be loaded unless a target is supplied.</p>
</li>
<li>
<p><code>&lt;type:name&gt;</code> can now contain spaces. Any underscores in the type name will no longer be replaced with spaces. To keep v2 behaviour replace any underscores with spaces.</p>
</li>
<li>
<p><code>&lt;xlinedb:filename&gt;</code> is now relative to the data directory. Generally all you will need to do in order to upgrade is remove <code>data/</code> from the path.</p>
</li>
</ul>
<h2 id="moves">Moves</h2>
<ul>
<li>
<p>The <code>/MODENOTICE</code> command has been moved to the new modenotice module. See the documentation in modules.conf.example for more details.</p>
</li>
<li>
<p>The close module has been moved to inspircd-contrib. In order to upgrade either remove this module from your configuration or run <code>./modulemanager install m_close</code> to install it.</p>
</li>
<li>
<p>The geoip module has been replaced with the geo_maxmind and geoclass modules. In order to upgrade load these modules and replace comma-delimited <code>&lt;connect:geoip&gt;</code> entries with space-delimited <code>&lt;connect:country&gt;</code> entries.  </p>
</li>
<li>
<p>The jumpserver module has been moved to inspircd-contrib. In order to upgrade either remove this module from your configuration or run <code>./modulemanager install m_jumpserver</code> to install it.</p>
</li>
<li>
<p>Server configuration for the ldapauth module has been moved to <code>&lt;database&gt;</code>. See the documentation in modules.conf.example for more details.</p>
</li>
<li>
<p>Server configuration for the ldapoper module has been moved to <code>&lt;database&gt;</code>. See the documentation in modules.conf.example for more details.</p>
</li>
<li>
<p><code>&lt;banlist&gt;</code> has been moved to <code>&lt;maxlist&gt;</code> and now applies to all mode types unless a mode constraint is added.</p>
</li>
<li>
<p><code>&lt;performance:nouserdns&gt;</code> has been moved to <code>&lt;connect:resolvehostnames&gt;</code>.</p>
</li>
<li>
<p>The <code>aliases</code> directory which previously contained services aliases has been renamed to <code>services</code> and now also contains services pseudoclient nickname reservations and filter exemptions. Generally all you will need to do to upgrade is to amend any <code>&lt;include&gt;</code> tags to point to the new directory.</p>
</li>
<li>
<p>The <code>helpop-full.conf.example</code> config file has been merged with <code>helpop.conf.example</code>. Generally all you will need to do to upgrade is to amend any <code>&lt;include&gt;</code> tags to point to the new file.</p>
</li>
<li>
<p>DNSBL-related server notices have been moved to the 'd' (dnsbl) snomask character.  You will need to update any oper blocks.</p>
</li>
<li>
<p>Filter-related server notices have been moved to the 'f' (filter) snomask character.  You will need to update any oper blocks.</p>
</li>
</ul>
<h2 id="removals">Removals</h2>
<ul>
<li>
<p>The <code>/RANDQUOTE</code> command has been removed with no replacement.</p>
</li>
<li>
<p>The <code>/RULES</code> command has been removed. If you wish to keep this command then you should load the new showfile module. See the documentation in modules.conf.example for more details.</p>
</li>
<li>
<p>The chanprotect module has been removed. If you wish to keep this behaviour then you should load the customprefix module and uncomment the "founder" and "admin" prefixes. See the documentation in modules.conf.example for more details.</p>
</li>
<li>
<p>The devoice module has been removed. If you wish to keep this behaviour then you should load the customprefix module and specify <code>&lt;customprefix name="voice" change="yes" depriv="yes"&gt;</code> to allow users to devoice themselves.</p>
</li>
<li>
<p>The halfop module has been removed. If you wish to keep this behaviour then you should load the customprefix module and uncomment the "halfop" prefix. See the documentation in modules.conf.example for more details.</p>
</li>
<li>
<p>The regonlycreate module has been removed. If you wish to keep this behaviour then you should load the restrictchans module and enable the <code>&lt;restrictchans:allowregistered&gt;</code> setting.</p>
</li>
<li>
<p>The ripemd160 module has been removed. If you wish to keep this behaviour then you should install and load the hash_gnutls module from inspircd-contrib.</p>
</li>
<li>
<p>The testnet module has been removed with no replacement.</p>
</li>
<li>
<p>The <code>compat-host</code> and <code>compat-ip</code> options for <code>&lt;cloak:mode&gt;</code> have been removed. You should switch to either <code>full</code> or <code>half</code> instead. See the documentation in modules.conf.example for more details.</p>
</li>
<li>
<p>The <code>identfirst</code>, <code>pass</code>, and <code>passfirst</code> options for <code>&lt;cgihost:type&gt;</code> has been removed. You should switch to either <code>ident</code> or <code>webirc</code>instead. See the documentation in modules.conf.example for more details.</p>
</li>
<li>
<p>The <code>suffix</code> mode of <code>&lt;hostchange:action&gt;</code> has been removed. If you wish to keep this behaviour you should change it to <code>set</code> and specify the <code>value</code> parameter.</p>
</li>
<li>
<p>The 'd' (debug) snomask character has been removed and the things using it have been moved to 'a' (announcements) and 'x' (xline) respectively. You will need to update any oper blocks.</p>
</li>
<li>
<p><code>&lt;banlist&gt;</code> has been removed. If you wish to keep this behaviour you should rename it to <code>&lt;maxlist mode="ban"&gt;</code>.</p>
</li>
<li>
<p><code>&lt;callerid:operoverride&gt;</code> has been removed. If you wish to keep this behaviour then you should give your server operators the <code>users/ignore-callerid</code> privilege.</p>
</li>
<li>
<p><code>&lt;chanfilter&gt;</code> has been removed. If you wish to keep this behaviour you should rename it to <code>&lt;maxlist mode="filter"&gt;</code>.</p>
</li>
<li>
<p><code>&lt;connect:allowmotdcolors&gt;</code> has been removed with no replacement (now always enabled).</p>
</li>
<li>
<p><code>&lt;exemptchanops&gt;</code> has been removed. If you wish to keep this behaviour you should rename it to <code>&lt;maxlist mode="exemptchanops"&gt;</code>.</p>
</li>
<li>
<p><code>&lt;gnutls:advertisedports&gt;</code> has been removed with no replacement.</p>
</li>
<li>
<p><code>&lt;gnutls:showports&gt;</code> has been removed with no replacement (now always disabled).</p>
</li>
<li>
<p><code>&lt;gnutls:dhbits&gt;</code> has been removed with no replacement. You must now provide a DH parameter file for the server to use instead.</p>
</li>
<li>
<p><code>&lt;gnutls:starttls&gt;</code> has been removed. If you wish to keep this behaviour then you should load the new starttls module. See the documentation in modules.conf.example for more details.</p>
</li>
<li>
<p><code>&lt;host:prefix&gt;</code> has been removed. If you wish to keep this behaviour you should move the prefix field to your <code>&lt;hostchange&gt;</code> blocks</p>
</li>
<li>
<p><code>&lt;host:separator&gt;</code> has been removed. If you wish to keep this behaviour you should append or prepend it to your <code>&lt;hostchange:prefix&gt;</code> or <code>&lt;hostchange:suffix&gt;</code> tags as appropriate.</p>
</li>
<li>
<p><code>&lt;host:suffix&gt;</code> has been removed. If you wish to keep this behaviour you should move the suffix field to your <code>&lt;hostchange&gt;</code> blocks</p>
</li>
<li>
<p><code>&lt;nonicks:operoverride&gt;</code> has been removed. If you wish to keep this behaviour then you should give your server operators the <code>channels/ignore-nonicks</code> privilege.</p>
</li>
<li>
<p><code>&lt;options:cyclehosts&gt;</code> has been removed. If you wish to keep this behaviour then you should load the new hostcycle module. See the documentation in modules.conf.example for more details.</p>
</li>
<li>
<p><code>&lt;options:ircumsgprefix&gt;</code> has been removed with no replacement (now always disabled).</p>
</li>
<li>
<p><code>&lt;openssl:advertisedports&gt;</code> has been removed with no replacement.</p>
</li>
<li>
<p><code>&lt;openssl:cipherserverpref&gt;</code> has been removed with no replacement (now always enabled).</p>
</li>
<li>
<p><code>&lt;openssl:showports&gt;</code> has been removed with no replacement (now always disabled).</p>
</li>
<li>
<p><code>&lt;openssl:sslv3&gt;</code> has been removed with no replacement (now always disabled).</p>
</li>
<li>
<p><code>&lt;opermotd:processcolors&gt;</code> has been removed with no replacement (now always enabled).</p>
</li>
<li>
<p><code>&lt;options:welcomenotice&gt;</code> has been removed with no replacement (now always disabled).</p>
</li>
<li>
<p><code>&lt;performance:limitsomaxconn&gt;</code> has been removed with no replacement (now always disabled).</p>
</li>
<li>
<p><code>&lt;redirect:antiredirect&gt;</code> has been removed with no replacement (now always enabled).</p>
</li>
<li>
<p><code>&lt;restrictmsg:uline&gt;</code> has been removed with no replacement (now always enabled).</p>
</li>
<li>
<p><code>&lt;security:hidemodes&gt;</code> has been removed. If you wish to keep this behaviour then you should load the new hidelist module. See the documentation in modules.conf.example for more details.</p>
</li>
<li>
<p><code>&lt;security:operspywhois&gt;</code> has been removed. If you wish to keep this behaviour then you should give your server operators the <code>users/channel-spy</code> privilege and enable the <code>&lt;options:splitwhois&gt;</code> setting.</p>
</li>
<li>
<p><code>&lt;sqloper:hash&gt;</code> has been removed. If you wish to keep this behaviour then you should add a <code>hash</code> column to your SQL table and populate it with the hash you have used for your server operators.</p>
</li>
</ul></div>
        
        
    </div>

    <footer class="col-md-12 text-center">
        
        <hr>
        <p>
        <small>All documentation is licensed under the <a href="/license">GNU GPLv2</a>.<br></small>
        
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>

        
        
    </footer>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="../../js/bootstrap-3.0.3.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>var base_url = "../.."</script>
    
    <script src="../../js/base.js"></script>
    <script src="../../search/main.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    </body>

</html>
